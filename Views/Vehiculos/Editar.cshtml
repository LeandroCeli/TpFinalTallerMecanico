@model TallerMecanico.Models.Vehiculo

@{
    ViewData["Title"] = "Editar Vehículo";
}

<div class="container mt-4">
    <h2 class="mb-4">✏️ Editar Vehículo</h2>

    <div class="card shadow-sm p-4">
        <form asp-action="Editar" method="post">
            @Html.AntiForgeryToken()

            <!-- IDs ocultos -->
            <input asp-for="Id" type="hidden" />
            <input asp-for="ClienteId" type="hidden" />

            <div class="row mb-3">
                <div class="col-md-4">
                    <label asp-for="Patente" class="form-label fw-bold">Patente</label>
                    <input asp-for="Patente" class="form-control" readonly />
                    <span asp-validation-for="Patente" class="text-danger"></span>
                </div>

                <div class="col-md-4">
                    <label asp-for="Marca" class="form-label fw-bold">Marca</label>
                    <select asp-for="Marca" class="form-select">
                        <option value="">Seleccione una marca...</option>
                        <option>Toyota</option>
                        <option>Ford</option>
                        <option>Fiat</option>
                        <option>Chevrolet</option>
                        <option>Renault</option>
                        <option>Volkswagen</option>
                        <option>Peugeot</option>
                        <option>Citroën</option>
                        <option>Honda</option>
                        <option>Otra</option>
                    </select>
                    <span asp-validation-for="Marca" class="text-danger"></span>
                </div>

                <div class="col-md-4">
                    <label asp-for="Modelo" class="form-label fw-bold">Modelo</label>
                    <input asp-for="Modelo" class="form-control" />
                    <span asp-validation-for="Modelo" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-3">
                    <label asp-for="Anio" class="form-label fw-bold">Año</label>
                    <input asp-for="Anio" class="form-control" type="number" />
                    <span asp-validation-for="Anio" class="text-danger"></span>
                </div>

                <div class="col-md-3">
                    <label asp-for="Color" class="form-label fw-bold">Color</label>
                    <input asp-for="Color" class="form-control" />
                    <span asp-validation-for="Color" class="text-danger"></span>
                </div>

                <div class="col-md-3">
                    <label asp-for="Kilometraje" class="form-label fw-bold">Kilometraje</label>
                    <input asp-for="Kilometraje" class="form-control" type="number" min="0" />
                    <span asp-validation-for="Kilometraje" class="text-danger"></span>
                </div>

                <div class="col-md-3">
                    <label asp-for="Tipo" class="form-label fw-bold">Tipo de vehículo</label>
                    <select asp-for="Tipo" class="form-select">
                        <option value="">Seleccione...</option>
                        <option value="Personal" selected="@("Personal" == Model.Tipo)">Personal</option>
                        <option value="Trabajo" selected="@("Trabajo" == Model.Tipo)">Trabajo</option>
                        <option value="Otro" selected="@("Otro" == Model.Tipo)">Otro</option>
                    </select>
                    <span asp-validation-for="Tipo" class="text-danger"></span>
                </div>
            </div>

            <!-- ✅ Cliente asociado -->
            <div class="mb-3">
                <label class="form-label fw-bold">Cliente asociado</label>
                <div class="border rounded p-2 bg-light">
                    @if (Model.Cliente != null)
                    {
                        <span>@Model.Cliente.Nombre @Model.Cliente.Apellido</span>
                        <br />
                        <small class="text-muted">DNI: @Model.Cliente.Dni - Tel: @Model.Cliente.Telefono</small>
                    }
                    else
                    {
                        <span class="text-danger">❌ No hay cliente asociado</span>
                    }
                </div>
            </div>

            <div class="d-flex gap-2 mt-4">
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-save"></i> Guardar cambios
                </button>

                <a asp-action="PorCliente" asp-controller="Vehiculos" asp-route-idCliente="@Model.ClienteId"
                    class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Volver al Cliente
                </a>

                <a asp-action="Index" class="btn btn-outline-dark">
                    <i class="bi bi-list"></i> Todos los Vehículos
                </a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}